   # .github/workflows/release.yml
   name: Build & Release

   on:
     push:
       tags:
         - 'v*.*.*'     # e.g. v1.0.0

   jobs:
     build-linux:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3

         - name: Install deps
           run: |
             sudo apt-get update
             sudo apt-get install -y build-essential cmake libraylib-dev

         - name: Build
           run: |
             mkdir build && cd build
             cmake .. -DCMAKE_BUILD_TYPE=Release
             cmake --build . --config Release

         - name: Package with CPack (AppImage)
           run: |
             cd build
             cpack -G AppImage

         - name: Publish Linux build
           uses: softprops/action-gh-release@v1
           with:
             tag_name: ${{ github.ref_name }}
             name: Gstar-${{ github.ref_name }}-linux
             files: build/*.AppImage
           env:
             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

     build-macos:
       runs-on: macos-latest
       steps:
         - uses: actions/checkout@v3

         - name: Install deps
           run: brew update && brew install cmake raylib

         - name: Build .app bundle
           run: |
             mkdir build && cd build
             cmake .. \
               -DCMAKE_BUILD_TYPE=Release \
               -DCMAKE_OSX_ARCHITECTURES="x86_64;arm64" \
               -DBUNDLE_BUNDLE_NAME=Gstar.app
             cmake --build . --config Release

         - name: Package with CPack (macOS .dmg)
           run: |
             cd build
             cpack -G DragNDrop

         - name: Publish macOS build
           uses: softprops/action-gh-release@v1
           with:
             tag_name: ${{ github.ref_name }}
             name: Gstar-${{ github.ref_name }}-macos
             files: build/*.dmg
           env:
             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}